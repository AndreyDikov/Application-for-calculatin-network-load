<!DOCTYPE html>
<html lang="ru"
	  xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Личный Кабинет</title>
	<link rel="stylesheet" href="../css/personal-account.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body class="castome-tema">
	<nav class="navbar navbar-expand-lg bg-body-tertiary">
		<img th:src="@{/images/logo.png}" alt="Логотип" class="logo ims">
		<div class="container-fluid row justify-content-evenly ">
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="nav nav-tabs container text-center">
					<li class="nav-item col-3">
						<a class="nav-link " aria-current="page" href="calculation.html">Выполнить расчет</a>
					</li>
					<li class="nav-item col-3">
						<a class="nav-link " aria-current="page" href="calculation-history.html">История рассчетов</a>
					</li>
					<li class="nav-item col-3">
						<a class="nav-link active" aria-current="page" href="personal-account.html">Личный кабинет</a>
					</li>
					<li class="nav-item col-3">
						<a class=" nav-link " aria-current="page" th:href="@{/logout}">Выход</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- тоже обернуть общим layout -->
	<div class="d-flex justify-content-center">
		<div class="form-container">
			<div class="container ">
				<form class="ga-2" th:action="@{/personal-account/{userId}/update-user(userId=${currentUser.id})}"
					  method="post" th:object="${currentUser}">
					<div class="row">
						<div class="col-4 ">
							<span class="input-group-text" for="username">Имя:</span>
						</div>
						<div class="col-8 ">
							<input disabled class="form-control" type="text"
								   th:field="*{name}" value="Иван">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-4 ">
							<span class="input-group-text" for="surname">Фамилия:</span>
						</div>
						<div class="col-8 ">
							<input disabled class="form-control" type="text"
								   th:field="*{surname}" value="Иванов">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-4 ">
							<span class="input-group-text" for="patronymic">Отчество:</span>
						</div>
						<div class="col-8 ">
							<input disabled class="form-control" type="text"
								   th:field="*{patronymic}" value="Иванович">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-4 ">
							<span class="input-group-text" for="email">Почта:</span>
						</div>
						<div class="col-8 ">
							<input disabled class="form-control" type="text"
								   th:field="*{email}" value="ivanov@example.com">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-4 ">
							<span class="input-group-text" for="phone">Телефон:</span>
						</div>
						<div class="col-8 ">
							<input disabled class="form-control" type="text"
								   th:field="*{phone}" value="+7 912 345-67-89">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-4 ">
							<span class="input-group-text" for="subscriptionStatus">Статус подписки:</span>
						</div>
						<div class="col-8 ">
							<input disabled class="form-control" type="text"
								   th:field="*{isActive}" value="Активна">
						</div>
					</div>
					<!--todo исправить js-скрипт для кнопки сохранения полей при редактировании профиля-->
					<div class="pt-4">
						<button type="button" class="btn btn-primary">Оформить подписку</button>
						<button id="editProfileButton" type="button" class="btn btn-primary">Редактировать профиль</button>
						<input type="submit" class="btn btn-primary" value="Сохранить"/>
						<a class="btn btn-primary"
								th:href="@{/personal-account/update-password}">Изменить пароль</a>
					</div>
				</form>
			</div>
		</div>
	</div>
	<script>
		document.getElementById('editProfileButton').addEventListener('click', function () {
			var inputs = document.querySelectorAll('input');
			inputs.forEach(function (input) {
				input.removeAttribute('disabled');
			});

			this.style.display = 'none';
			document.getElementById('saveChangesButton').style.display = 'inline-block';

			formSaved = true;
		});

		document.getElementById('saveChangesButton').addEventListener('click', function () {
			if (!formSaved) return;

			// alert('Изменения сохранены');

			var inputs = document.querySelectorAll('input');
			inputs.forEach(function (input) {
				input.setAttribute('disabled', '');
			});
			this.style.display = 'none';
			document.getElementById('editProfileButton').style.display = 'inline-block';

			formSaved = false;
		});
	</script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
</body>

</html>